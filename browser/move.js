window.move=function(){var modules={},require=function require(a){if(++require.depth>20)throw new Error("Recursive module dependencies");a=a.replace(/^[\/.]+/g,"");var b=modules[a];if(!b)throw new Error("No module with id "+a);if(b.block){var c=b.block;b.block=null,c(b.exports,require,b)}require.depth--;return b.exports};require.depth=0,modules["ast-mutators"]=module={id:"ast-mutators",exports:{},block:function(a,b,c,d,e){var f=b("./parse-js"),g=b("./process"),h=b("./util").array_to_hash;a.add_implicit_returns=function i(a){function d(a,d,e,f){e.length&&e[e.length-1][0]==="stat"&&(e[e.length-1][0]="return");return[this[0],a,d.slice(),c(e,b.walk),f]}var b=g.ast_walker(),c=g.MAP,e=b.with_walkers({defun:d,"function":d},function(){return b.walk(a)});return e},a.first_time_var_delc=function j(a,b){function m(a,b,e,f){return[this[0],l(a),b,k(function(){d(b,l);return d(e,c.walk)}),f]}function l(a){return i.define(a)}function k(a){i=new e(i),i.vars=[];var b=i.body=a();if(i.vars.length){var c=b[0]==="toplevel"?b[1]:b,f=["var",d(i.vars,function(a){return[a]})];c.splice(0,0,f)}i=i.parent;return b}var c=g.ast_walker(),d=g.MAP,e=g.Scope,i=null,j=f.slice;b&&(i=new e,i.names=h(b));return k(function(){var b=c.with_walkers({defun:m,"function":m,"var":function(a){var b=["assign",!0];d(a,function(a){l(a[0]),i.vars.push(a[0]),b.push(["name",a[0]]),b.push(a[1])});return["stat",b]},"import":function(a){d(a,function(a){l(a[0]),i.vars.push(a[0])})},"export":function(a){d(a,function(a){l(a[0]),i.vars.push(a[0])})},"const":function(a){d(a,function(a){l(a[0])})},assign:function(a,b,d){if(b[0]==="name"){var e=b[1],f=i.has(e);f||(i.vars.push(e),l(e))}return[this[0],a,c.walk(b),c.walk(d)]}},function(){return c.walk(a)});return b})};var k=/^[_\$a-z][_\$\w\d]*$/i;a.named_lambda_assignments=function l(a){var b=g.ast_walker(),c=g.MAP,d=b.with_walkers({"export":function(a){return[this[0],c(a,function(a){var c=[a[0]];a.length>1&&(a[1]&&a[1][0]==="function"&&!a[1][1]&&(a[1][1]=a[0]),c[1]=b.walk(a[1]));return c})]},assign:function(a,c,d){if(d[0]==="function"&&!d[1])if(c[0]==="name")d[1]=c[1];else if(c[0]==="dot")d[1]=c[c.length-1];else if(c[0]==="sub"&&c[2][0]==="string"){var e=c[2][1];!f.KEYWORDS[e]&&!f.RESERVED_WORDS[e]&&k.test(e)&&(d[1]=e)}return[this[0],a,b.walk(c),b.walk(d)]}},function(){return b.walk(a)});return d},a.enforce_strict_eq_ops=function m(a){var b=g.ast_walker(),c=g.MAP;return b.with_walkers({binary:function(a,c,d){a==="=="?a="===":a==="!="&&(a="!==");return[this[0],a,b.walk(c),b.walk(d)]}},function(){return b.walk(a)})},a.enable_keyword_arguments=function n(a,b){var c=g.ast_walker(),d=g.MAP;b||(b="__kw");var e=["var",[[b,["sub",["name","arguments"],["num",0]]]]],f=["binary","&&",["binary","&&",["name",b],["binary","==",["unary-prefix","typeof",["name",b]],["string","object"]]],["unary-prefix","!",["binary","instanceof",["name",b],["name","Array"]]]];return c.with_walkers({"function":function(a,g,h,i){if(g.length){var j,k,l,m,n=Array(g.length+1);n[0]="seq";for(j=0;j<g.length;)k=g[j++],l=i&&i[k],m=["dot",["name",b],k],l&&(m=["conditional",["binary","!==",m,["name","undefined"]],m,l]),n[j]=["assign",!0,["name",k],m];h=[e,["stat",["binary","&&",f,n]]].concat(h)}return[this[0],a,g,d(h,c.walk),i]}},function(){return c.walk(a)})}}},modules.index=module={id:"index",exports:{},block:function(exports,require,module,__filename,__dirname){var fs;try{fs=require("fs")}catch(e){}var parser=require("./parse-js"),processor=require("./process"),astMutators=require("./ast-mutators");exports.compile=function compile(a,b){var c={source:null,strictMode:!1,embedTokens:!1,implicitReturns:!0,automaticVarDeclarations:!0,namedLambdas:!0,strictEqualityOperators:!0,keywordArguments:!0,mangleNames:!1,optimizationLevel:0,outputFormatting:{indent_level:2},detailedOutput:!1,filename:"?"};typeof a==="object"&&(b=a,a=b.source);if(typeof b==="object")for(var d in b)c[d]=b[d];try{var e=parser.parse(a,c.strictMode,c.embedTokens)}catch(f){if(f.name==="JS_Parse_Error"){f.name="SyntaxError";var g="";for(var h=0;h<f.col;++h)g+=" ";f.diagnostic=f.name+": "+f.message+"\n"+c.filename+":"+f.line+":"+f.col+"\n"+a.split(/[\r\n]/)[f.line]+"\n"+g+"â¬†",f.stack&&(f.stack=f.diagnostic+"\n"+f.stack.split(/[\r\n]/).slice(1).join("\n"))}throw f}c.implicitReturns&&(e=astMutators.add_implicit_returns(e)),c.automaticVarDeclarations&&(e=astMutators.first_time_var_delc(e,["global","process","require","console","window","document","__filename","__dirname","module"])),c.namedLambdas&&(e=astMutators.named_lambda_assignments(e)),c.strictEqualityOperators&&(e=astMutators.enforce_strict_eq_ops(e)),c.keywordArguments&&(e=astMutators.enable_keyword_arguments(e)),c.mangleNames&&(e=processor.ast_mangle(e)),c.optimizationLevel&&(e=processor.ast_squeeze(e)),typeof c.optimizationLevel==="number"&&c.optimizationLevel>1&&(e=processor.ast_squeeze_more(e));var i=processor.gen_code(e,c.outputFormatting);return c.detailedOutput?{ast:e,code:i}:i},exports.compileFileSync=function compileFile(a,b){if(!fs)throw new Error("File system access is not supported");typeof b==="object"&&!b.filename?b.filename=a:b={filename:a};return exports.compile(fs.readFileSync(a,"utf8"),b)};var evalFunc=eval;try{var runInThisContext=require("vm").runInThisContext;evalFunc=runInThisContext}catch(e){}exports.eval=function(a,b){if(!b||typeof b!=="object")b={filename:b||"<input>"};var c=exports.compile(a,b);return evalFunc(c,b.filename)},require.extensions&&(require.extensions[".mv"]=require.extensions[".move"]=function compileMoveModule(a,b){content=exports.compileFileSync(b);return a._compile(content,b)})}},modules["parse-js"]=module={id:"parse-js",exports:{},block:function(a,b,c,d,e){function P(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function O(a,b){for(var c=b.length;--c>=0;)if(b[c]===a)return!0;return!1}function N(a){return a.split("")}function M(a,b){return Array.prototype.slice.call(a,b==null?0:b)}function L(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function K(a){a instanceof Function&&(a=a());for(var b=1,c=arguments.length;--c>0;++b)arguments[b]();return a}function J(a){var b=M(arguments,1);return function(){return a.apply(this,b.concat(M(arguments)))}}function I(a,b,c){function bn(a){try{++d.in_loop;return a()}finally{--d.in_loop}}function bm(a){arguments.length==0&&(a=!0);var b=bl();if(a&&e("punc",",")){g();return p("seq",b,bm())}return b}function bl(){var a=bj(),b=d.token.value;if(e("operator")&&P(D,b)){if(bk(a)){g();return p("assign",D[b],a,bl())}i("Invalid assignment")}return a}function bk(a){switch(a[0]){case"dot":case"sub":return!0;case"name":return a[1]!="this"}}function bj(){var a=bi();if(e("operator","?")){g();var b=bm(!1);m(":");return p("conditional",a,b,bm(!1))}return a}function bi(){return bh(Z(!0),0)}function bh(a,b){var c=e("operator")?d.token.value:null,f=c!=null?E[c]:null;if(f!=null&&f>b){g();var h=bh(Z(!0),f);return bh(p("binary",c,a,h),b)}return a}function bg(a,b,c){(b=="++"||b=="--")&&!bk(c)&&i("Invalid use of "+b+" operator");return p(a,b,c)}function bf(a,b){if(e("punc",".")){g();return bf(p("dot",a,be()),b)}if(e("punc","[")){g();return bf(p("sub",a,K(bm,J(m,"]"))),b)}if(b&&e("punc","(")){g();return bf(p("call",a,$(")")),!0)}if(b&&e("punc","{")){g();var c=a,f=bb();return bf(p("call",c,[f]),!0)}if(b&&e("operator")&&P(C,d.token.value))return K(J(bg,"unary-postfix",d.token.value,a),g);return a}function be(){switch(d.token.type){case"name":case"operator":case"keyword":case"atom":return K(d.token.value,g);default:k()}}function bd(){switch(d.token.type){case"num":case"string":return K(d.token.value,g)}return be()}function bc(){var a=!0,c,f,h=[],i={};while(!e("punc",")")){a?a=!1:m(",");if(!b&&e("punc",")"))break;c=d.token.type,f=bd(),h.push(f);if(e("punc",":")||e("operator","="))g(),i[f]=bm(!1)}g();return{names:h,values:i}}function bb(){var a=!0,c=[];while(!e("punc","}")){a?a=!1:m(",");if(!b&&e("punc","}"))break;var f=d.token.type,h=bd();f!="name"||h!="get"&&h!="set"||!!e("punc",":")?(m(":"),c.push([h,bm(!1)])):c.push([be(),I(!1),h])}g();return p("object",c)}function ba(){return p("array",$("]",!b,!0))}function _(a,b,c){var d=!0,f=[];try{while(!e("punc",a)){d?d=!1:m(",");if(b&&e("punc",a))break;e("punc",",")&&c?f.push(["atom","undefined"]):f.push(bm(!1))}g()}catch(h){if(String(h.message).indexOf("Unexpected token")!==0)throw h}return f}function $(a,b,c){var d=!0,f=[];while(!e("punc",a)){d?d=!1:m(",");if(b&&e("punc",a))break;e("punc",",")&&c?f.push(["atom","undefined"]):f.push(bm(!1))}g();return f}function Z(a){if(e("operator","new")){g();return Y()}if(e("operator")&&P(B,d.token.value))return bg("unary-prefix",K(d.token.value,g),Z(a));if(e("punc")){switch(d.token.value){case"(":g();return bf(K(bm,J(m,")")),a);case"[":g();return bf(ba(),a);case"{":g();return bf(bb(),a)}k()}if(e("keyword","function")){g();return bf(I(!1),a)}if(P(G,d.token.type)){var b=d.token.type=="regexp"?p("regexp",d.token.value[0],d.token.value[1]):p(d.token.type,d.token.value);return bf(K(b,g),a)}k()}function Y(){var a=Z(!1),b;e("punc","(")?(g(),b=$(")")):b=[];return bf(p("new",a,b),!0)}function X(){return p("export",T())}function W(){return p("import",T())}function V(){return p("const",T())}function U(){return p("var",T())}function T(){var a=[];for(;;){e("name")||k();var b=d.token.value;g(),e("operator","=")?(g(),a.push([b,bm(!1)])):a.push([b]);if(!e("punc",","))break;g()}return a}function S(){var a=Q(),b,c;if(e("keyword","catch")){g(),m("("),e("name")||i("Name expected");var f=d.token.value;g(),m(")"),b=[f,Q()]}e("keyword","finally")&&(g(),c=Q()),!b&&!c&&i("Missing catch/finally blocks");return p("try",a,b,c)}function Q(){m("{");var a=[];while(!e("punc","}"))e("eof")&&k(),a.push(s());g();return a}function N(){var a=q(),b=s(),c;e("keyword","else")&&(g(),c=s());return p("if",a,b,c)}function L(a){var b=e("name")?K(d.token.value,g):null;a&&!b&&k(),m("(");var c=bc();return p(a?"defun":"function",b,c.names,function(){++d.in_function;var a=d.in_loop;d.in_loop=0;var b=Q();--d.in_function,d.in_loop=a;return b}(),c.values)}function z(){m("(");var a=e("keyword","var");a&&g();if(e("name")&&y(f(),"operator","in")){var b=d.token.value;g(),g();var c=bm();m(")");return p("for-in",a,b,c,bn(s))}var h=e("punc",";")?null:a?U():bm();m(";");var i=e("punc",";")?null:bm();m(";");var j=e("punc",")")?null:bm();m(")");return p("for",h,i,j,bn(s))}function w(a){var b=e("name")?d.token.value:null;b!=null?(g(),O(b,d.labels)||i("Label "+b+" without matching loop or statement")):d.in_loop==0&&i(a+" not inside a loop or switch"),o();return p(a,b)}function v(){return p("stat",K(bm,o))}function u(a){d.labels.push(a);var c=d.token,e=s();b&&!P(F,e[0])&&k(c),d.labels.pop();return p("label",a,e)}function t(){e("operator","/")&&(d.peeked=null,d.token=d.input(!0));switch(d.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return v();case"name":return y(f(),"punc",":")?u(K(d.token.value,g,g)):v();case"punc":switch(d.token.value){case"{":return p("block",Q());case"[":case"(":return v();case";":g();return p("block");default:k()};case"keyword":switch(K(d.token.value,g)){case"break":return w("break");case"continue":return w("continue");case"debugger":o();return p("debugger");case"do":return function(a){l("keyword","while");return p("do",K(q,o),a)}(bn(s));case"for":return z();case"function":return I(!0);case"if":return N();case"return":d.in_function==0&&i("'return' outside of function");return p("return",e("punc",";")?(g(),null):n()?null:K(bm,o));case"switch":return p("switch",q(),R());case"throw":return p("throw",K(bm,o));case"try":return S();case"var":return K(U,o);case"const":return K(V,o);case"while":return p("while",q(),bn(s));case"with":i("'with' statement not allowed");case"import":return K(W,o);case"export":return K(X,o);default:k()}}}function r(a,b,c){return a instanceof H?a:new H(a,b,c)}function q(){m("(");var a=bm();m(")");return a}function p(){return M(arguments)}function o(){e("punc",";")?g():n()||k()}function n(){return!b&&(d.token.nlb||e("eof")||e("punc","}"))}function m(a){return l("punc",a)}function l(a,b){if(e(a,b))return g();j(d.token,"Unexpected token "+d.token.type+", expected "+a)}function k(a){a==null&&(a=d.token),j(a,"Unexpected token: "+a.type+" ("+a.value+")")}function j(a,b){i(b,a.line,a.col)}function i(a,b,c,e){var f=d.input.context();x(a,b!=null?b:f.tokline,c!=null?c:f.tokcol,e!=null?e:f.tokpos)}function h(){return d.prev}function g(){d.prev=d.token,d.peeked?(d.token=d.peeked,d.peeked=null):d.token=d.input();return d.token}function f(){return d.peeked||(d.peeked=d.input())}function e(a,b){return y(d.token,a,b)}var d={input:typeof a=="string"?A(a,!0):a,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[]};d.token=g();var s=c?function(){var a=d.token,b=t.apply(this,arguments);b[0]=r(b[0],a,h());return b}:t,I=c?function(){var a=h(),b=L.apply(this,arguments);b[0]=r(b[0],a,h());return b}:L,R=J(bn,function(){m("{");var a=[],b=null;while(!e("punc","}"))e("eof")&&k(),e("keyword","case")?(g(),b=[],a.push([bm(),b]),m(":")):e("keyword","default")?(g(),m(":"),b=[],a.push([null,b])):(b||k(),b.push(s()));g();return a});return p("toplevel",function(a){while(!e("eof"))a.push(s());return a}([]))}function H(a,b,c){this.name=a,this.start=b,this.end=c}function A(a){function N(a){if(b.queued_tokens.length)return b.queued_tokens.shift();if(a)return H();m(),k();var e=c();if(!e)return l("eof");if(u(e))return A();if(e==='"'||e==="'")return E();if(P(q,e))return l("punc",d());if(e===".")return K();if(e==="/")return J();if(e==="#"){var f=b.regex_allowed;b.comments_before.push(F()),b.regex_allowed=f;return N()}if(e==="^"&&b.prev_token&&(b.prev_token.type==="punc"||b.prev_token.type==="operator"||b.prev_token.value==="=")){d(),e=c(),e==="{"&&(b.queued_tokens.push(l("punc","(")),b.queued_tokens.push(l("punc",")")));return l("keyword","function")}if(P(j,e))return I();if(e==="@"){d();var g=L(),h=l("name","this");h.nlb=g.nlb,g.nlb=!1,b.queued_tokens.push(l("punc",".")),b.queued_tokens.push(g);return h}if(t(e))return L();y("Unexpected character '"+e+"'")}function M(a,b){try{return b()}catch(c){if(c===z)y(a);else throw c}}function L(){var a=w(t);return P(f,a)?P(n,a)?l("operator",a):P(i,a)?l("atom",a):l("keyword",a):l("name",a)}function K(){d();return u(c())?A("."):l("punc",".")}function J(){d();var a=b.regex_allowed;switch(c()){case"/":b.comments_before.push(F()),b.regex_allowed=a;return N();case"*":b.comments_before.push(G()),b.regex_allowed=a;return N()}return b.regex_allowed?H():I("/")}function I(a){function b(a){if(!c())return a;var e=a+c();if(P(n,e)){d();return b(e)}return a}return l("operator",b(a||d()))}function H(){return M("Unterminated regular expression",function(){var a=!1,b="",c,e=!1;while(c=d(!0))if(a)b+="\\"+c,a=!1;else if(c=="[")e=!0,b+=c;else if(c=="]"&&e)e=!1,b+=c;else{if(c=="/"&&!e)break;c=="\\"?a=!0:b+=c}var f=w(function(a){return P(r,a)});return l("regexp",[b,f])})}function G(){d();return M("Unterminated multiline comment",function(){var a=g("*/",!0),c=b.text.substring(b.pos,a),d=l("comment2",c,!0);b.pos=a+2,b.line+=c.split("\n").length-1,b.newline_before=c.indexOf("\n")>=0;return d})}function F(){d();var a=g("\n"),c;a==-1?(c=b.text.substr(b.pos),b.pos=b.text.length):(c=b.text.substring(b.pos,a),b.pos=a);return l("comment1",c,!0)}function E(){return M("Unterminated string constant",function(){var a=d(),b="";for(;;){var c=d(!0);if(c=="\\")c=B();else if(c==a)break;b+=c}return l("string",b)})}function D(a){var b=0;for(;a>0;--a){var c=parseInt(d(!0),16);isNaN(c)&&y("Invalid hex-character pattern in string"),b=b<<4|c}return b}function B(){var a=d(!0);switch(a){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return" ";case"x":return String.fromCharCode(D(2));case"u":return String.fromCharCode(D(4));default:return a}}function A(a){var b=!1,c=!1,d=!1,e=a==".",f=w(function(f,g){if(f=="x"||f=="X"){if(d)return!1;return d=!0}if(!d&&(f=="E"||f=="e")){if(b)return!1;return b=c=!0}if(f=="-"){if(c||g==0&&!a)return!0;return!1}if(f=="+")return c;c=!1;if(f=="."){if(!e)return e=!0;return!1}return s(f)});a&&(f=a+f);var g=v(f);if(!isNaN(g))return l("num",g);y("Invalid syntax: "+f)}function y(a){x(a,b.tokline,b.tokcol,b.tokpos)}function w(a){var b="",e=c(),f=0;while(e&&a(e,f++))b+=d(),e=c();return b}function m(){while(P(o,c()))d()}function l(a,c,d){b.regex_allowed=a=="operator"&&!P(C,c)||a=="keyword"&&P(h,c)||a=="punc"&&P(p,c);var e={type:a,value:c,line:b.tokline,col:b.tokcol,pos:b.tokpos,nlb:b.newline_before};d||(e.comments_before=b.comments_before,b.comments_before=[]),b.newline_before=!1,b.prev_token=e;return e}function k(){b.tokline=b.line,b.tokcol=b.col,b.tokpos=b.pos}function g(a,c){var d=b.text.indexOf(a,b.pos);if(c&&d==-1)throw z;return d}function e(){return!b.peek()}function d(a){var c=b.text.charAt(b.pos++);if(a&&!c)throw z;c=="\n"?(b.newline_before=!0,++b.line,b.col=0):++b.col;return c}function c(){return b.text.charAt(b.pos)}var b={text:a.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],queued_tokens:[]};N.context=function(a){a&&(b=a);return b};return N}function y(a,b,c){return a.type==b&&(c==null||a.value==c)}function x(a,b,c,d){throw new w(a,b,c,d)}function w(a,b,c,d){this.name="JS_Parse_Error",this.message=a,this.line=b,this.col=c,this.pos=d;try{({})()}catch(e){this.stack=this.message,e&&e.stack&&(this.stack+="\n"+e.stack.split(/[\r\n]/).slice(3).join("\n"))}}function v(a){if(k.test(a))return parseInt(a.substr(2),16);if(l.test(a))return parseInt(a.substr(1),8);if(m.test(a))return parseFloat(a)}function u(a){a=a.charCodeAt(0);return a>=48&&a<=57}function t(a){return s(a)||a=="$"||a=="_"}function s(a){a=a.charCodeAt(0);return a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122}var f=L(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with","import","export"]);a.KEYWORDS=f;var g=L(["abstract","boolean","byte","char","class","debugger","double","enum","extends","final","float","goto","implements","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]);a.RESERVED_WORDS=g;var h=L(["return","new","delete","throw","else","case"]),i=L(["false","null","true","undefined"]),j=L(N("+-*&%=<>!?|~^")),k=/^0x[0-9a-f]+$/i,l=/^0[0-7]+$/,m=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,n=L(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","%=","|=","^=","&=","&&","||"]),o=L(N(" \n\r\t")),p=L(N("[{}(,.;:")),q=L(N("[]{}(),;:")),r=L(N("gmsiy"));w.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var z={},B=L(["typeof","void","delete","--","++","!","~","-","+"]),C=L(["--","++"]),D=function(a,b,c){while(c<a.length)b[a[c]]=a[c].substr(0,a[c].length-1),c++;return b}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),E=function(a,b){for(var c=0,d=1;c<a.length;++c,++d){var e=a[c];for(var f=0;f<e.length;++f)b[e[f]]=d}return b}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),F=L(["for","do","while","switch"]),G=L(["atom","num","string","regexp","name"]);H.prototype.toString=function(){return this.name},a.tokenizer=A,a.parse=I,a.slice=M,a.curry=J,a.member=O,a.array_to_hash=L,a.PRECEDENCE=E,a.KEYWORDS_ATOM=i,a.RESERVED_WORDS=g,a.KEYWORDS=f,a.ATOMIC_START_TOKEN=G,a.OPERATORS=n,a.is_alphanumeric_char=s,a.is_identifier_char=t}},modules.process=module={id:"process",exports:{},block:function(a,b,c,d,e){function H(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function G(a){return/^[a-z_$][a-z0-9_$]*$/i.test(a)&&a!="this"&&!H(f.KEYWORDS_ATOM,a)&&!H(f.RESERVED_WORDS,a)&&!H(f.KEYWORDS,a)}function F(a,b){var c={};a===!0&&(a={});for(var d in b)H(b,d)&&(c[d]=a&&H(a,d)?a[d]:b[d]);return c}function E(a,b){if(b<=0)return"";if(b==1)return a;var c=E(a,b>>1);c+=c,b&1&&(c+=a);return c}function D(a,b){var c=[0];f.parse(function(){function j(){var a=d.apply(this,arguments);out:{if(g&&g.type=="keyword")break out;if(h(a)>b)switch(a.type){case"keyword":case"atom":case"name":case"punc":i(a);break out}}g=a;return a}function i(a){e=a.pos,c.push(e)}function h(a){return a.pos-e}var d=f.tokenizer(a),e=0,g;j.context=function(){return d.context.apply(this,arguments)};return j}());return c.map(function(b,d){return a.substring(b,c[d+1]||a.length)}).join("\n")}function C(a,b){function K(a){var b=a[0],c=t[b];if(!c)throw new Error("Can't find generator for \""+b+'"');J.push(a);var d=c.apply(b,a.slice(1));J.pop();return d}function D(a){var b=a[0],c=a[1];c!=null&&(b=n([b,"=",K(c)]));return b}function C(a){if(!a)return";";if(a.length==0)return"{}";return"{"+d+m(function(){return y(a).join(d)})+d+l("}")}function z(a){var c=a.length;if(c==0)return"{}";return"{"+d+I(a,function(a,e){var f=a[1].length>0,g=m(function(){return l(a[0]?n(["case",K(a[0])+":"]):"default:")},.5)+(f?d+m(function(){return y(a[1]).join(d)}):"");!b&&f&&e<c-1&&(g+=";");return g}).join(d)+d+l("}")}function y(a){for(var c=[],d=a.length-1,e=0;e<=d;++e){var f=a[e],g=K(f);g!=";"&&(!b&&e==d&&(f[0]=="while"&&v(f[2])||h(f[0],["for","for-in"])&&v(f[4])||f[0]=="if"&&v(f[2])&&!f[3]||f[0]=="if"&&f[3]&&v(f[3])?g=g.replace(/;*\s*$/,";"):g=g.replace(/;+\s*$/,"")),c.push(g))}return I(c,l)}function x(a){return a.toString()}function w(a,c,d,e,f){var g=f||"function";a?g+=" "+x(a):b&&(g+=" "),g+="("+o(I(c,x))+")";return n([g,C(d)])}function u(a){if(a[0]=="do")return K(["block",[a]]);var b=a;while(!0){var c=b[0];if(c=="if"){if(!b[3])return K(["block",[a]]);b=b[3]}else if(c=="while"||c=="do")b=b[2];else if(c=="for"||c=="for-in")b=b[4];else break}return K(a)}function s(a){var b=a.toString(10),c=[b.replace(/^0\./,".")],d;Math.floor(a)===a?(c.push("0x"+a.toString(16).toLowerCase(),"0"+a.toString(8)),(d=/^(.*?)(0+)$/.exec(a))&&c.push(d[1]+"e"+d[2].length)):(d=/^0?\.(0+)(.*)$/.exec(a))&&c.push(d[2]+"e-"+(d[1].length+d[2].length),b.substr(b.indexOf(".")));return q(c)}function r(a){if(a[0]=="function"){var b=g(J),c=b.pop(),d=b.pop();while(d){if(d[0]=="stat")return!0;if(d[0]=="seq"&&d[1]===c||d[0]=="call"&&d[1]===c||d[0]=="binary"&&d[2]===c)c=d,d=b.pop();else return!1}}return!H(A,a[0])}function q(a){if(a.length==1)return a[0];if(a.length==2){var b=a[1];a=a[0];return a.length<=b.length?a:b}return q([a[0],q(a.slice(1))])}function p(a){var b=K(a);for(var c=1;c<arguments.length;++c){var d=arguments[c];if(d instanceof Function&&d(a)||a[0]==d)return"("+b+")"}return b}function o(a){return a.join(","+e)}function n(a){if(b)return a.join(" ");var c=[];for(var d=0;d<a.length;++d){var e=a[d+1];c.push(a[d]),e&&(/[a-z0-9_\x24]$/i.test(a[d].toString())&&/^[a-z0-9_\x24]/i.test(e.toString())||/[\+\-]$/.test(a[d].toString())&&/^[\+\-]/.test(e.toString()))&&c.push(" ")}return c.join("")}function m(a,b){b==null&&(b=1),c+=b;try{return a.apply(null,g(arguments,1))}finally{c-=b}}function l(a){a==null&&(a=""),b&&(a=E(" ",b.indent_start+c*b.indent_level)+a);return a}b&&(b=F(b,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!1}));var c=0,d=b?"\n":"",e=b?" ":"",t={string:B,num:s,name:x,toplevel:function(a){return y(a).join(d+d)},block:C,"var":function(a){return"var "+o(I(a,D))+";"},"const":function(a){return"const "+o(I(a,D))+";"},"import":function(a){return o(I(a,function(a){var b=a[0],c=b;a.length>1&&(c=a[1][1]);return b+" = require("+K(["string",c])+")"}))+";"},"export":function(a){return o(I(a,function(b){var c=b[0],d=c;b.length>1&&(d=b[1][1]);return"exports."+c+" = "+o(I(a,D))}))+";"},"try":function(a,b,c){var d=["try",C(a)];b&&d.push("catch","("+b[0]+")",C(b[1])),c&&d.push("finally",C(c));return n(d)},"throw":function(a){return n(["throw",K(a)])+";"},"new":function(a,b){b=b.length>0?"("+o(I(b,K))+")":"";return n(["new",p(a,"seq","binary","conditional","assign",function(a){var b=k(),c={};try{b.with_walkers({call:function(){throw c},"function":function(){return this}},function(){b.walk(a)})}catch(d){if(d===c)return!0;throw d}})+b])},"switch":function(a,b){return n(["switch","("+K(a)+")",z(b)])},"break":function(a){var b="break";a!=null&&(b+=" "+x(a));return b+";"},"continue":function(a){var b="continue";a!=null&&(b+=" "+x(a));return b+";"},conditional:function(a,b,c){return n([p(a,"assign","seq","conditional"),"?",p(b,"seq"),":",p(c,"seq")])},assign:function(a,b,c){a&&a!==!0?a+="=":a="=";return n([K(b),a,p(c,"seq")])},dot:function(a){var b=K(a),c=1;a[0]=="num"?b+=".":r(a)&&(b="("+b+")");while(c<arguments.length)b+="."+x(arguments[c++]);return b},call:function(a,b){var c=K(a);r(a)&&(c="("+c+")");return c+"("+o(I(b,function(a){return p(a,"seq")}))+")"},"function":w,defun:w,"if":function(a,b,c){var d=["if","("+K(a)+")",c?u(b):K(b)];c&&d.push("else",K(c));return n(d)},"for":function(a,b,c,d){var f=["for"];a=(a!=null?K(a):"").replace(/;*\s*$/,";"+e),b=(b!=null?K(b):"").replace(/;*\s*$/,";"+e),c=(c!=null?K(c):"").replace(/;*\s*$/,"");var g=a+b+c;g=="; ; "&&(g=";;"),f.push("("+g+")",K(d));return n(f)},"for-in":function(a,b,c,d){var e=n(["for","("]);a&&(e+="var "),e+=n([x(b)+" in "+K(c)+")",K(d)]);return e},"while":function(a,b){return n(["while","("+K(a)+")",K(b)])},"do":function(a,b){return n(["do",K(b),"while","("+K(a)+")"])+";"},"return":function(a){var b=["return"];a!=null&&b.push(K(a));return n(b)+";"},binary:function(a,b,c){var d=K(b),e=K(c);if(h(b[0],["assign","conditional","seq"])||b[0]=="binary"&&i[a]>i[b[1]])d="("+d+")";if(h(c[0],["assign","conditional","seq"])||c[0]=="binary"&&i[a]>=i[c[1]]&&(c[1]!=a||!h(a,["&&","||","*"])))e="("+e+")";return n([d,a,e])},"unary-prefix":function(a,b){var c=K(b);b[0]=="num"||b[0]=="unary-prefix"&&!H(j,a+b[1])||!r(b)||(c="("+c+")");return a+(f.is_alphanumeric_char(a.charAt(0))?" ":"")+c},"unary-postfix":function(a,b){var c=K(b);b[0]=="num"||b[0]=="unary-postfix"&&!H(j,a+b[1])||!r(b)||(c="("+c+")");return c+a},sub:function(a,b){var c=K(a);r(a)&&(c="("+c+")");return c+"["+K(b)+"]"},object:function(a){if(a.length==0)return"{}";return"{"+d+m(function(){return I(a,function(a){if(a.length==3)return l(w(a[0],a[1][2],a[1][3],a[1][4],a[2]));var c=a[0],d=K(a[1]);b&&b.quote_keys?c=B(c):(typeof c=="number"||!b&&+c+""==c)&&parseFloat(c)>=0?c=s(+c):G(c)||(c=B(c));return l(n(b&&b.space_colon?[c,":",d]:[c+":",d]))}).join(","+d)})+d+l("}")},regexp:function(a,b){return"/"+a+"/"+b},array:function(a){if(a.length==0)return"[]";return n(["[",o(I(a,function(a){if(!b&&a[0]=="atom"&&a[1]=="undefined")return"";return p(a,"seq")})),"]"])},stat:function(a){return K(a).replace(/;*\s*$/,";")},seq:function(){return o(I(g(arguments),K))},label:function(a,b){return n([x(a),":",K(b)])},"with":function(a,b){return n(["with","("+K(a)+")",K(b)])},atom:function(a){return x(a)}},J=[];return K(a)}function B(a){var b=0,c=0;a=a.replace(/[\\\b\f\n\r\t\x22\x27]/g,function(a){switch(a){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case'"':++b;return'"';case"'":++c;return"'"}return a});return b>c?"'"+a.replace(/\x27/g,"\\'")+"'":'"'+a.replace(/\x22/g,'\\"')+'"'}function z(a,b){function w(a,b){return x(a,function(a,c){if(!c){y(b);return["block"]}return["for",null,null,null,d(b)]})}function p(a,b,c){a=d(a),b=d(b),c=d(c),v(b)?(a=f(a),b=c,c=null):v(c)?c=null:function(){var d=C(a),e=f(a),g=C(e);if(g.length<d.length){var h=b;b=c,c=h,a=e}}();if(v(c)&&v(b))return["stat",a];var e=["if",a,b,c];b[0]=="if"&&v(b[3])&&v(c)?e=q(e,d(["if",["binary","&&",a,b[1]],b[2]])):b[0]=="stat"?c?c[0]=="stat"&&(e=q(e,["stat",u(a,b[1],c[1])])):e=q(e,["stat",u(a,b[1])]):!c||b[0]!=c[0]||b[0]!="return"&&b[0]!="throw"?c&&s(b)?(e=[["if",a,b]],c[0]=="block"?c[1]&&(e=e.concat(c[1])):e.push(c),e=d(["block",e])):b&&s(c)&&(e=[["if",f(a),c]],b[0]=="block"?b[1]&&(e=e.concat(b[1])):e.push(b),e=d(["block",e])):e=q(e,[b[0],u(a,b[1],c[1])]);return e}function o(a,b,c){return x(a,function(a,d){if(d){y(c);return b}y(b);return c},function(){return p(a,b,c)})}function m(a,c){a=a.reduce(function(a,b){b[0]=="block"?b[1]&&a.push.apply(a,b[1]):a.push(b);return a},[]),a=function(b,c){a.forEach(function(a){c&&(a[0]=="var"&&c[0]=="var"||a[0]=="const"&&c[0]=="const")?c[1]=c[1].concat(a[1]):(b.push(a),c=a)});return b}([]),b.dead_code&&(a=function(c,d){a.forEach(function(a){d?h(a[0],["function","defun","var","const"])?c.push(a):b.no_warnings||y(a):(c.push(a),h(a[0],["return","throw","break","continue"])&&(d=!0))});return c}([])),b.make_seqs&&(a=function(b,c){a.forEach(function(a){c&&c[0]=="stat"&&a[0]=="stat"?c[1]=["seq",c[1],a[1]]:(b.push(a),c=a)});return b}([])),c=="lambda"&&(a=function(b,c,d){while(b<a.length){d=a[b++];if(d[0]=="if"&&!d[3]){if(d[2][0]=="return"&&d[2][1]==null){c.push(o(f(d[1]),["block",a.slice(b)]));break}var e=r(d[2]);if(e[0]=="return"&&e[1]==null){c.push(o(d[1],["block",d[2][1].slice(0,-1)],["block",a.slice(b)]));break}}c.push(d)}return c}(0,[]));return a}function l(a,b,c,e){return[this[0],a,b,i(c.scope,function(){return m(I(c,d),"lambda")}),e]}function j(a){a!=null&&a[0]=="block"&&a[1]&&(a[1].length==1?a=a[1][0]:a[1].length==0&&(a=["block"]));return a}function i(a,b){var c=e;e=a;var d=b();d.scope=a,e=c;return d}function f(a){var c=["unary-prefix","!",a];switch(a[0]){case"unary-prefix":return a[1]=="!"&&t(a[2])?a[2]:c;case"seq":a=g(a),a[a.length-1]=f(a[a.length-1]);return a;case"conditional":return q(c,["conditional",a[1],f(a[2]),f(a[3])]);case"binary":var d=a[1],e=a[2],h=a[3];if(!b.keep_comps)switch(d){case"<=":return["binary",">",e,h];case"<":return["binary",">=",e,h];case">=":return["binary","<",e,h];case">":return["binary","<=",e,h]}switch(d){case"==":return["binary","!=",e,h];case"!=":return["binary","==",e,h];case"===":return["binary","!==",e,h];case"!==":return["binary","===",e,h];case"&&":return q(c,["binary","||",f(e),f(h)]);case"||":return q(c,["binary","&&",f(e),f(h)])}}return c}b=F(b,{make_seqs:!0,dead_code:!0,keep_comps:!0,no_warnings:!1});var c=k(),d=c.walk,e;return c.with_walkers({sub:function(a,b){if(b[0]=="string"){var c=b[1];if(G(c))return["dot",d(a),c]}},"if":o,toplevel:function(a){return["toplevel",i(this.scope,function(){return m(I(a,d))})]},"switch":function(a,b){var c=b.length-1;return["switch",d(a),I(b,function(a,b){var e=m(I(a[1],d));if(b==c&&e.length>0){var f=e[e.length-1];f[0]=="break"&&!f[1]&&e.pop()}return[a[0]?d(a[0]):null,e]})]},"function":l,defun:l,block:function(a){if(a)return j(["block",m(I(a,d))])},binary:function(a,b,c){return x(["binary",a,d(b),d(c)],function e(a){return q(d(a),this)},function f(){return this})},conditional:function(a,b,c){return u(d(a),d(b),d(c))},"try":function(a,b,c){return["try",m(I(a,d)),b!=null?[b[0],m(I(b[1],d))]:null,c!=null?m(I(c,d)):null]},"unary-prefix":function(a,b){b=d(b);var c=["unary-prefix",a,b];a=="!"&&(c=q(c,f(b)));return x(c,function(a,b){return d(a)},function(){return c})},name:function(a){switch(a){case"true":return["unary-prefix","!",["num",0]];case"false":return["unary-prefix","!",["num",1]]}},"new":function(a,b){if(a[0]=="name"&&a[1]=="Array"&&!e.has("Array"))return b.length!=1?["array",b]:["call",["name","Array"],b]},call:function(a,b){if(a[0]=="name"&&a[1]=="Array"&&b.length!=1&&!e.has("Array"))return["array",b]},"while":w,"do":w},function(){return d(n(a))})}function y(a){v(a)||p("Dropping unreachable code: "+C(a,!0))}function w(a){return a[0]=="string"||a[0]=="unary-prefix"&&a[1]=="typeof"||a[0]=="binary"&&a[1]=="+"&&(w(a[2])||w(a[3]))}function v(a){return!a||a[0]=="block"&&(!a[1]||a[1].length==0)}function u(a,b,c){return a[0]=="unary-prefix"&&a[1]=="!"?c?["conditional",a[2],c,b]:["binary","||",a[2],b]:c?["conditional",a,b,c]:["binary","&&",a,b]}function t(a){return a[0]=="unary-prefix"&&h(a[1],["!","delete"])||a[0]=="binary"&&h(a[1],["in","instanceof","==","!=","===","!==","<","<=",">=",">"])||a[0]=="binary"&&h(a[1],["&&","||"])&&t(a[2])&&t(a[3])||a[0]=="conditional"&&t(a[2])&&t(a[3])||a[0]=="assign"&&a[1]===!0&&t(a[3])||a[0]=="seq"&&t(a[a.length-1])}function s(a){if(a){a=r(a);if(a[0]=="return"||a[0]=="break"||a[0]=="continue"||a[0]=="throw")return!0}}function r(a){if(a[0]=="block"&&a[1]&&a[1].length>0)return a[1][a[1].length-1];return a}function q(a,b){return C(a).length>C(b[0]=="stat"?b[1]:b).length?b:a}function o(a,b){function i(a){return[this[0],I(a,function(a){return[f(a[0]),d(a[1])]})]}function h(a,b){var c=e;e=a;for(var d in a.names)H(a.names,d)&&f(d,!0);var g=b();g.scope=a,e=c;return g}function g(a,b,c,e){a&&(a=f(a)),c=h(c.scope,function(){b=I(b,function(a){return f(a)});return I(c,d)});return[this[0],a,b,c,e]}function f(a,c){if(!b&&!e.parent)return a;return e.get_mangled(a,c)}var c=k(),d=c.walk,e;return c.with_walkers({"function":g,defun:function(){var a=g.apply(this,arguments);switch(c.parent()[0]){case"toplevel":case"function":case"defun":return I.at_top(a)}return a},"var":i,"const":i,name:function(a){return[this[0],f(a)]},"try":function(a,b,c){return[this[0],I(a,d),b!=null?[f(b[0]),I(b[1],d)]:null,c!=null?I(c,d):null]},toplevel:function(a){var b=this;return h(b.scope,function(){return[b[0],I(a,d)]})},"for-in":function(a,b,c,e){return[this[0],a,f(b),d(c),d(e)]}},function(){return d(n(a))})}function n(a){function i(a,b,c,e){return[this[0],g(a),b,f(function(){I(b,g);return I(c,d)}),e]}function h(a){b.refs[a]=!0}function g(a){return b.define(a)}function f(a){b=new l(b);var c=b.body=a();c.scope=b,b=b.parent;return c}var b=null,c=k(),d=c.walk,e=[];return f(function(){function j(a,b){for(b=a.children.length;--b>=0;)j(a.children[b]);for(b in a.refs)if(H(a.refs,b))for(var c=a.has(b),d=a;d;d=d.parent){d.refs[b]=c;if(d===c)break}}var f=c.with_walkers({"function":i,defun:i,"with":function(a,c){for(var d=b;d;d=d.parent)d.uses_with=!0},"var":function(a){I(a,function(a){g(a[0])})},"const":function(a){I(a,function(a){g(a[0])})},"try":function(a,b,c){if(b!=null)return[this[0],I(a,d),[g(b[0]),I(b[1],d)],c!=null?I(c,d):null]},name:function(a){a=="eval"&&e.push(b),h(a)},"for-in":function(a,b){a?g(b):h(b)}},function(){return d(a)});I(e,function(a){if(!a.has("eval"))while(a)a.uses_eval=!0,a=a.parent}),j(b);return f})}function l(a){this.names={},this.mangled={},this.rev_mangled={},this.cname=-1,this.refs={},this.uses_with=!1,this.uses_eval=!1,this.parent=a,this.children=[],a?(this.level=a.level+1,a.children.push(this)):this.level=0}function k(a){function h(a,b){var c={},e;for(e in a)H(a,e)&&(c[e]=d[e],d[e]=a[e]);var f=b();for(e in c)H(c,e)&&(c[e]?d[e]=c[e]:delete d[e]);return f}function f(a){if(a==null)return null;try{e.push(a);var b=a[0],f=d[b];if(f){var g=f.apply(a,a.slice(1));if(g!=null)return g}f=c[b];return f.apply(a,a.slice(1))}finally{e.pop()}}function b(a){return[this[0],I(a,function(a){var b=[a[0]];a.length>1&&(b[1]=f(a[1]));return b})]}var c={string:function(a){return[this[0],a]},num:function(a){return[this[0],a]},name:function(a){return[this[0],a]},toplevel:function(a){return[this[0],I(a,f)]},block:function(a){var b=[this[0]];a!=null&&b.push(I(a,f));return b},"var":b,"const":b,"import":b,"export":b,"try":function(a,b,c){return[this[0],I(a,f),b!=null?[b[0],I(b[1],f)]:null,c!=null?I(c,f):null]},"throw":function(a){return[this[0],f(a)]},"new":function(a,b){return[this[0],f(a),I(b,f)]},"switch":function(a,b){return[this[0],f(a),I(b,function(a){return[a[0]?f(a[0]):null,I(a[1],f)]})]},"break":function(a){return[this[0],a]},"continue":function(a){return[this[0],a]},conditional:function(a,b,c){return[this[0],f(a),f(b),f(c)]},assign:function(a,b,c){return[this[0],a,f(b),f(c)]},dot:function(a){return[this[0],f(a)].concat(g(arguments,1))},call:function(a,b){return[this[0],f(a),I(b,f)]},"function":function(a,b,c,d){return[this[0],a,b.slice(),I(c,f),d]},defun:function(a,b,c,d){return[this[0],a,b.slice(),I(c,f),d]},"if":function(a,b,c){return[this[0],f(a),f(b),f(c)]},"for":function(a,b,c,d){return[this[0],f(a),f(b),f(c),f(d)]},"for-in":function(a,b,c,d){return[this[0],a,b,f(c),f(d)]},"while":function(a,b){return[this[0],f(a),f(b)]},"do":function(a,b){return[this[0],f(a),f(b)]},"return":function(a){return[this[0],f(a)]},binary:function(a,b,c){return[this[0],a,f(b),f(c)]},"unary-prefix":function(a,b){return[this[0],a,f(b)]},"unary-postfix":function(a,b){return[this[0],a,f(b)]},sub:function(a,b){return[this[0],f(a),f(b)]},object:function(a){return[this[0],I(a,function(a){return a.length==2?[a[0],f(a[1])]:[a[0],f(a[1]),a[2]]})]},regexp:function(a,b){return[this[0],a,b]},array:function(a){return[this[0],I(a,f)]},stat:function(a){return[this[0],f(a)]},seq:function(){return[this[0]].concat(I(g(arguments),f))},label:function(a,b){return[this[0],a,f(b)]},"with":function(a,b){return[this[0],f(a),f(b)]},atom:function(a){return[this[0],a]}},d={},e=[];return{walk:f,with_walkers:h,parent:function(){return e[e.length-2]},stack:function(){return e}}}var f=b("./parse-js"),g=f.slice,h=f.member,i=f.PRECEDENCE,j=f.OPERATORS,m=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_";return function(b){var c="";do c=a.charAt(b%54)+c,b=Math.floor(b/54);while(b>0);return c}}();l.prototype={has:function(a){for(var b=this;b;b=b.parent)if(H(b.names,a))return b},has_mangled:function(a){for(var b=this;b;b=b.parent)if(H(b.rev_mangled,a))return b},toJSON:function(){return{names:this.names,uses_eval:this.uses_eval,uses_with:this.uses_with}},next_mangled:function(){for(;;){var a=m(++this.cname),b;b=this.has_mangled(a);if(b&&this.refs[b.rev_mangled[a]]===b)continue;b=this.has(a);if(b&&b!==this&&this.refs[a]===b&&!b.has_mangled(a))continue;if(H(this.refs,a)&&this.refs[a]==null)continue;if(!G(a))continue;return a}},get_mangled:function(a,b){if(this.uses_eval||this.uses_with)return a;var c=this.has(a);if(!c)return a;if(H(c.mangled,a))return c.mangled[a];if(!b)return a;var d=c.next_mangled();c.rev_mangled[d]=a;return c.mangled[a]=d},define:function(a){if(a!=null)return this.names[a]=a}};var p=function(){},x=function(){function b(c){switch(c[0]){case"string":case"num":return c[1];case"name":case"atom":switch(c[1]){case"true":return!0;case"false":return!1}break;case"unary-prefix":switch(c[1]){case"!":return!b(c[2]);case"typeof":return typeof b(c[2]);case"~":return~b(c[2]);case"-":return-b(c[2]);case"+":return+b(c[2])}break;case"binary":var d=c[2],e=c[3];switch(c[1]){case"&&":return b(d)&&b(e);case"||":return b(d)||b(e);case"|":return b(d)|b(e);case"&":return b(d)&b(e);case"^":return b(d)^b(e);case"+":return b(d)+b(e);case"*":return b(d)*b(e);case"/":return b(d)/b(e);case"-":return b(d)-b(e);case"<<":return b(d)<<b(e);case">>":return b(d)>>b(e);case">>>":return b(d)>>>b(e);case"==":return b(d)==b(e);case"===":return b(d)===b(e);case"!=":return b(d)!=b(e);case"!==":return b(d)!==b(e);case"<":return b(d)<b(e);case"<=":return b(d)<=b(e);case">":return b(d)>b(e);case">=":return b(d)>=b(e);case"in":return b(d)in b(e);case"instanceof":return b(d)instanceof b(e)}}throw a}var a={};return function(c,d,e){try{var f=b(c),g;switch(typeof f){case"string":g=["string",f];break;case"number":g=["num",f];break;case"boolean":g=["name",String(f)];break;default:throw new Error("Can't handle constant of type: "+typeof f)}return d.call(c,g,f)}catch(h){if(h===a){c[0]=="binary"&&(c[1]=="==="||c[1]=="!==")&&(w(c[2])&&w(c[3])||t(c[2])&&t(c[3]))&&(c[1]=c[1].substr(0,2));return e?e.call(c,c):null}throw h}}}(),A=f.array_to_hash(["name","array","string","dot","sub","call","regexp"]),I;(function(){function a(a){this.v=a}I=function(b,c,d){var e=[];for(var f=0;f<b.length;++f){var g=c.call(d,b[f],f);g instanceof a?e.unshift(g.v):e.push(g)}return e},I.at_top=function(b){return new a(b)}})(),a.ast_walker=k,a.ast_mangle=o,a.ast_squeeze=z,a.gen_code=C,a.ast_add_scope=n,a.ast_squeeze_more=b("./squeeze-more").ast_squeeze_more,a.set_logger=function(a){p=a},a.make_string=B,a.split_lines=D,a.MAP=I,a.Scope=l}},modules["squeeze-more"]=module={id:"squeeze-more",exports:{},block:function(a,b,c,d,e){function l(a){var b=g.ast_walker(),c=b.walk;return b.with_walkers({call:function(a,b){if(a[0]=="dot"&&a[2]=="toString"&&b.length==0)return["binary","+",a[1],["string",""]]}},function(){return c(a)})}var f=b("./parse-js"),g=b("./process"),h=f.slice,i=f.member,j=f.PRECEDENCE,k=f.OPERATORS;a.ast_squeeze_more=l}},modules.test=module={id:"test",exports:{},block:function(a,b,c,d,e){var f;a.foo=f=function f(){return 30}}},modules.util=module={id:"util",exports:{},block:function(a,b,c,d,e){a.array_to_hash=function(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b},a.words_to_hash=function(a){return array_to_hash(a.split(" "))},a.string_to_charset=function(a){return array_to_hash(a.split("").map(function(a){return a.charCodeAt(0)}))},a.is_alphanumeric_char=function(a){return a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122},a.is_digit_char=function(a){return a>=48&&a<=57},a.HOP=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.is_substr_eq=function(a,b,c){var d=c.length;while(--d!==-1)if(a.charCodeAt(b+d)!==c.charCodeAt(d))return!1;return!0}}};return require("index")}()